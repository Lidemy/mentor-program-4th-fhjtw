## 跟你朋友介紹 Git
  
身為一個創作者，一個好的笑話的誕生絕對需要多次的微調修改，才有最好的版本可以表演出來。  
其中，也會經過多次的測試（試講）、微調。  

但有時候笑話不一定會越改越好，也有可能越改越糟。  
該怎麼在修修改改的過程中，隨時能找回初衷、重新出發呢？  
這時候你需要「版本控制」來幫幫你！  
  
### 什麼是版本控制？
  
我們常常在做報告的時候，為了保留第一版、第二版、第三版，常常會分成多個檔案來儲存留底。  
往往是複製前一個檔案，再從複製出來的檔案繼續編輯，直到想做下一個版本來留底。  

這樣的缺點是會製造出大量的檔案，而且從檔案外不知道做了什麼樣的修改。  
同時有人想對某個檔案修改時，可能還會有無法編輯、或是檔案被直接覆蓋的風險。  
  
Git 就是用來記錄檔案版本與版本間的差異，讓你的檔案從頭到尾都只有同一組，  
但可以輕鬆地回溯到不同你紀錄的版本，方便比對每次版本增加/減少了什麼。  
如果同時有不同人編輯檔案時，也可以在比對的過程中發現檔案衝突，再手動修改/合併成一個合作編輯的版本。

### 如何開始？

1. **開始「笑話演進史」的版本管理**  
首先，在想要進行版本管理的資料夾下，用終端機下指令  
`git init` init=initialize(初始化)  
你的資料夾裡就會產生一個 `.git` 的隱藏資料夾，  
它會把跟版本控制相關的資訊都儲存在這裡。  
* 如果要刪除 git，輸入 `rm -r .git` 即可。
  
2. **把笑話都帶上，不是笑話的就不用跟來了**
接著，把需要加入版本控制的檔案用  
`git add [需要控制的檔案名稱]` 即可。  
  
如果有很多檔案想要加入管理，可以 `git add .`  
就能把整個資料夾的檔案都加入版本控制的行列了。  
  
* 如何查看狀態？ `git status` ，會顯示現在 git 的狀態  
如： `Changes to be committed (staged)` = 準備加入版本控制的檔  案  

* 如何將檔案移出版本控制？  
`rm --cached [要移除的檔案名稱]`

* 如何排除特定檔案不加入版本控制？  
`touch .gitignore; vim .gitignore`  
建立該檔案，在內容輸入需要排除的檔案名稱即可。  
通常裡面是放置跟使用者資料、紀錄檔、暫存檔等等。


3. **第一版、第二版，由此來劃定**  
來建立一個版本 —— Commit!  
`git commit` 會進入 Vim 編輯器，可以在此處輸入本次版本的說明（適合長說明）  
`git commit -m '關於本版本的短訊息'`  

* **「加入」版本控制是每次建立一個新版本前都要做的事！**
* 已加入過的檔案如有編輯，想更新可以合併 add 指令為 `git commit -am '關於本版本的短訊息'`，  
但 **新檔案** 還是要用 `git add [新檔案名稱]` 或 `git add .` 加入。
* commit 前可以使用 `git diff` 來查看這次上傳前和前一個版本之間有什麼差異。

4. **看到笑話版本演進的歷史**
查看版本紀錄 `git log`  
可以看到自己 commit 建立的版本紀錄，commit 編號、版本說明、時間等資訊。  
`git log --oneline` 會顯示比較短的版本紀錄摘要（編號只顯示前7碼）。  

5. **隨時回顧不同時期的版本笑話**
切換到不同版本查看。 `git checkout [版本編號]`  
同時查看 `git log` 時，也只能看到該時間點以前的 log 。  

* 如何回到最新版本？ `git checkout [分支名稱]`  
  
---

### 如何使用分支(branch)? 如何合併開發成果？
如果你有平時的表演和特定節慶邀約時的表演，  
在節慶到來前（好比說過年要講過年笑話）還是會有一般場合要讓笑話等級不斷提升的。  

這時候， 分支(branch)就是適合有多個人負責一個專案不同部分，  
或是在開發新功能時另外拉出一條平行線去做編輯維護的。  

假設 master 是 日常生活版的笑話，  
我們現在想要在過年到來前，提前想好過年哏跟日常笑話做組合，好在應景的時候講出來。  

但在過年哏想好前，原本笑話的主幹得到了靈感，我們就可以在 master 上直接做更新，講出來讓大家聽了。  
過年哏完成後，可以再跟升級後的日常笑話 master 版本做合併，就能在過年時發表一個升級過、又有過年哏的笑話了！  

1. 建立一個分支的方法 ： `git branch [分支名稱]`
2. `git branch -v` view，查看現在有哪些 branch
3. `git checkout [分支名稱]` 切換到該分支上進行工作
4. 在該 branch 上有進行改動，都要用 add、commit 進行版本更新
5. 切換回 master `git checkout master`
6. `git merge [branch name]` 將該 branch 合併入現在所在的 master 分支上
7. master 得到升級，可以刪除開發新功能用的那條分支 `git -d [分支名稱]`


### 合併(merge)時遇到衝突(conflict)
如果兩個 branch 上同一個檔案的內容有所衝突時，在 merge 時會出現 conflict 提示。  
可以使用 `git status` 查看發生衝突的檔案。
  
``` 
<<<<<<< HEAD  
主要分支上的內容  
=======  
欲併入的新分支內容  
>>>>>>> [分支名稱]
```
  
`=======` 是分隔線，
我們可以直接編輯檔案，刪去上面顯示兩版本差異的標示，  
留下自己需要的，或是重寫一段來整合這個衝突。  
儲存後，commit 就可以完成合併並解決此衝突了。  
  
---
  
### 跟世界上其他笑話冠軍交流交流 - GitHub

在 GitHub 上新增一個 repositery，來讓你本機上的專案可以同步到網路上，  
方便讓世界各地的人來看看你的專案、交流討論創作出更好的作品。  

1. 點擊 GitHub右上角 `+` -> `New repositery`  
2. 新增一個叫作`origin` 的遠端 repositery，作為本機專案的對應位置。 
並把我的東西推(push)上遠端 `origin` 一個也叫作 master 的分支。
```
git remote add origin https://github.com/[你的帳號]/[repositery name].git
git push -u origin master
```
3. 在本機完成的新的編輯，並且 commit 完成後，  
就可以把這個更新也同步到網路上的 repositery `origin`。  
`git push origin [要推上的分支名稱]`
  
如果在 GitHub 上有比本機專案更新的版本，想要把本機更新到最新的話。
1. 切換到
2. `git pull origin [要拉下的分支名稱]` 就可以完成更新。
  
如果看到別的笑話冠軍在 GitHub 上的專案想要下載到本機，  
可以在該專案右上角綠色按鈕 `Clone or download` 取得連結，  
並在終端機上輸入指令：  
``git clone git@github.com:[作者名稱]/[專案名稱].git``  
就可以完成 repositery 的下載了。  
  
但如果我們不擁有該作者專案的權限，就無法 push 我們的 commit 到該專案上。  
這時候，我們可以在該作者專案右上角點選 `Fork` 複製一份專案到我們自己的帳號下。  

將我們 Fork 的專案 clone 到本機上，就可以直接修改、commit 到我們 Fork 的 repositery 上了。  
再來，發起一個將我們 push 的 branch 合併到原始專案的 pull request，就可以待原始專案作者審核決定是否 merge，  
達成貢獻開放原始碼的行動囉！

